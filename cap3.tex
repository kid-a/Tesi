\clearpage{\pagestyle{empty}\cleardoublepage}
\chapter{Il datacenter}\label{sec:datacenter}
Il datacenter \`e il componente del sistema responsabile della elaborazione 
del flusso informativo generato dai dispositivi \emph{di campo}.
%
Si tratta di un sistema software /emph{online} costituito da 
diverse applicazioni, ciascuna delle quali implementa una o pi\`u delle 
funzionalit\`a tra quelle riportate di seguito:
%
\begin{itemize}
  \item decodifica dei \emph{dati di campo}
  \item stima di grandezze \emph{aggregate}
  \item memorizzazione dei dati su \emph{memoria persistente}
  \item rilevamento di \emph{condizioni anomale} e generazione di \emph{allarmi}
  \item fornire accesso allo \emph{stato} degli impianti
  \item fornire accesso ai \emph{dati storici} degli impianti
\end{itemize}
%

%
Dall'elenco delle funzionalit\`a, \`e facile osservare come il
datacenter ricopra un ruolo fondamentale all'interno del sistema di monitoraggio: 
si tratta di un componente \emph{critico}, un suo malfunzionamento 
(ad esempio uno \emph{shutdown} dovuto a un \emph{crash}) puo` avere effetti che 
vanno dalla semplice interruzione del servizio di accesso ai dati degli impianti 
fino alla mancata decodifica dei dati provenienti dai dispositivi di campo e, 
quindi, al blocco \emph{de facto} dell'intero sistema di monitoraggio.
%
Per questo motivo, durante la prima fase della progettazione, sono stati 
individuati, oltre ai gi\`a elencati requisiti funzionali, un insieme di 
\emph{propriet\`a} di cui il datacenter avrebbe dovuto godere. Tali propriet\`a 
sono:
%
\begin{itemize}
\item \emph{liveness}, i.e. una volta verificatosi un evento di interesse, 
il datacenter deve, prima o poi, gestirlo; tale propriet\`a serve a garantire, ad 
esempio, che ogni \emph{batch} di dati provenienti dai dati di campo venga, 
presto o tardi, processato.
%
\item \emph{high availability}, i.e. il datacenter deve essere costantemente 
in esecuzione, salvo \emph{downtime} programmati per operazioni quali 
aggiornamento release, etc.
%
\item \emph{robustness}, i.e. l'esecuzione del datacenter non deve essere 
compromessa da situazioni anomale quali, ad esempio, la ricezione di dati 
\emph{malformati} da parte di dispositivi di campo in avaria. Il datacenter 
deve essere in grado di rilevare potenziali anomalie.%% e segnalarle?
%
\item \emph{scalability}, i.e. le prestazioni del datacenter non devono 
decrescere all'aumentare del numero di impianti, e, quindi del numero di 
flussi informativi, da monitorare. %% e se un giorno volessi distribuire il datacenter?
%
\end{itemize}
%

%
Tali propriet\`a hanno fortemente condizionato il successivo \emph{step} di
progettazione, ovvero la scelta della \emph{tecnologia} su cui costruire il 
datacenter.
%
Tale scelta \`e ricaduta su Erlang/OTP (un acronimo per \emph{Open Telecom 
Platform}).
%

%
Questo capitolo \`e organizzato come segue: il prossimi due paragrafi
introdurranno Erlang/OTP e si soffermeranno sui motivi che ne fanno la scelta 
tecnologica pi\`u adatta. Successivamente, a partire dal paragrafo \ref{datacenter-arch} 
verr\`a descritta l'architettura del datacenter.

\section{Breve introduzione a Erlang/OTP}%%

\section{Perch\`e OTP}
%% brevissima introduzione a erlang che spieghi il perche` della scelta

%% architettura: insieme di erlang applications:
\section{L'architettura del datacenter}
\label{datacenter-arch}
\section{L'applicazione \emph{sysconf}}
\section{L'applicazione \emph{datamanager}}
\subsection{Il \emph{gen\_server filter}}
\subsection{Il \emph{gen\_server file\_poller}}
\subsection{La decodifica: \emph{ftp\_protocol}}
%% il supervision tree
\section{L'applicazione \emph{database}}
\section{L'applicazione \emph{datamanager-ws}}
